/**
 * 닉네임 생성 유틸리티
 * AI 봇과 사용자 회원가입에서 공통으로 사용
 */

// 학교 유형별 닉네임 풀
const nicknameComponents = {
  elementary: {
    animals: [
      '토끼', '코알라', '햄스터', '펭귄', '강아지', '고양이', '판다', '곰돌이', '다람쥐', '나비',
      '꿀벌', '사자', '호랑이', '기린', '코끼리', '원숭이', '여우', '늑대', '사슴', '말',
      '돼지', '양', '염소', '닭', '오리', '거북이', '물고기', '상어', '고래', '돌고래',
      '새', '독수리', '부엉이', '까마귀', '참새', '비둘기', '앵무새', '카나리아', '개구리', '뱀',
      '도마뱀', '거미', '개미', '벌', '잠자리', '메뚜기', '귀뚜라미', '무당벌레', '나비', '애벌레'
    ],
    characters: [
      '피카츄', '뽀로로', '크롱', '도라에몽', '미니언즈', '포켓몬', '아기공룡', '헬로키티',
      '마이멜로디', '쿠로미', '시나모롤', '폼폼푸린', '배드바츠마루', '케로피', '라이언',
      '어피치', '프로도', '네오', '튜브', '제이지', '콘', '무지', '짱구', '철수',
      '유리', '맹구', '훈이', '수지', '보니', '흰둥이', '짱아', '신형만', '봉미선',
      '디즈니', '미키', '미니', '도널드', '구피', '플루토', '칩', '데일', '스티치'
    ],
    colors: [
      '빨강', '파랑', '노랑', '초록', '보라', '분홍', '주황', '검정', '하양', '회색',
      '금색', '은색', '무지개', '별빛', '달빛', '햇빛', '구름', '하늘', '바다', '숲',
      '꽃', '나무', '잎사귀', '열매', '씨앗', '뿌리', '가지', '줄기', '꽃잎', '꽃봉오리'
    ],
    foods: [
      '사과', '바나나', '딸기', '포도', '수박', '참외', '복숭아', '배', '감', '귤',
      '오렌지', '키위', '망고', '파인애플', '체리', '블루베리', '라즈베리', '아보카도', '코코넛', '레몬',
      '라임', '자몽', '멜론', '토마토', '당근', '오이', '양파', '감자', '고구마', '옥수수'
    ]
  },
  middle: {
    animals: [
      '호랑이', '사자', '표범', '치타', '늑대', '여우', '곰', '독수리', '매', '상어',
      '고래', '돌고래', '펭귄', '북극곰', '판다', '코알라', '캥거루', '기린', '코끼리', '하마',
      '악어', '이구아나', '카멜레온', '뱀', '거북이', '문어', '오징어', '게', '새우', '랍스터',
      '나비', '잠자리', '사슴벌레', '장수풍뎅이', '거미', '전갈', '독거미', '타란툴라', '코브라', '비단뱀'
    ],
    characters: [
      '나루토', '사스케', '루피', '조로', '나미', '상디', '이치고', '루키아', '고쿠', '베지터',
      '피콜로', '손오공', '트랭크스', '고한', '크리링', '야무차', '텐신한', '라이언', '어피치', '프로도',
      '네오', '튜브', '제이지', '콘', '무지', '스파이더맨', '아이언맨', '캡틴', '헐크', '토르',
      '블랙위도', '호크아이', '데드풀', '울버린', '배트맨', '조커', '슈퍼맨', '원더우먼', '플래시', '아쿠아맨'
    ],
    colors: [
      '빨강', '파랑', '노랑', '초록', '보라', '분홍', '주황', '검정', '하양', '회색',
      '금색', '은색', '청록', '자주', '연두', '하늘', '남색', '갈색', '베이지', '크림',
      '네온', '형광', '메탈릭', '글리터', '홀로그램', '무지개', '그라데이션', '파스텔', '비비드', '다크'
    ],
    foods: [
      '피자', '햄버거', '치킨', '떡볶이', '라면', '김밥', '초밥', '스테이크', '파스타', '타코',
      '부리토', '샐러드', '샌드위치', '도넛', '케이크', '쿠키', '아이스크림', '초콜릿', '사탕', '젤리',
      '팝콘', '나초', '감자칩', '프렌치프라이', '치즈', '요거트', '밀크셰이크', '스무디', '커피', '차'
    ]
  },
  high: {
    animals: [
      '드래곤', '피닉스', '그리핀', '유니콘', '페가수스', '크라켄', '레비아탄', '바하무트', '펜리르', '요르문간드',
      '호랑이', '사자', '표범', '치타', '늑대', '여우', '독수리', '매', '올빼미', '까마귀',
      '상어', '고래', '돌고래', '범고래', '바라쿠다', '만타가오리', '해파리', '문어', '오징어', '랍스터',
      '전갈', '타란툴라', '코브라', '비단뱀', '아나콘다', '킹코브라', '맘바', '바이퍼', '방울뱀', '보아'
    ],
    characters: [
      '키리토', '아스나', '나츠', '루시', '에르자', '그레이', '웬디', '가쥬', '레비', '미라',
      '고쿠', '베지터', '프리저', '셀', '마인부', '브롤리', '고한', '트랭크스', '고텐', '피콜로',
      '이치고', '루키아', '우라하라', '아이젠', '야마모토', '우노하나', '켄파치', '토시로', '레이지', '진',
      '스파이더맨', '아이언맨', '캡틴', '토르', '헐크', '블랙위도', '호크아이', '닥터스트레인지', '앤트맨', '와스프'
    ],
    colors: [
      '크림슨', '스칼렛', '버건디', '마룬', '루비', '로즈골드', '플래티넘', '실버', '골드', '브론즈',
      '코발트', '사파이어', '에메랄드', '터키석', '아쿠아마린', '라벤더', '바이올렛', '마젠타', '퓨샤', '핑크',
      '코랄', '피치', '아프리콧', '앰버', '토파즈', '시트린', '올리브', '라임', '민트', '티파니'
    ],
    foods: [
      '스시', '사시미', '와규', '캐비어', '트러플', '푸아그라', '랍스터', '오마카세', '코스요리', '와인',
      '샴페인', '위스키', '브랜디', '꼬냑', '보드카', '진', '럼', '데킬라', '리큐르', '칵테일',
      '에스프레소', '카푸치노', '라떼', '마키아토', '아메리카노', '모카', '프라푸치노', '스무디', '밀크티', '버블티'
    ]
  }
};

/**
 * 학교 유형별 닉네임 생성 (단어+단어+숫자 형태)
 */
export function generateNickname(schoolType: 'elementary' | 'middle' | 'high' = 'middle'): string {
  const components = nicknameComponents[schoolType];
  const categories = Object.keys(components);
  
  // 첫 번째 단어 선택
  const category1 = categories[Math.floor(Math.random() * categories.length)];
  const word1 = components[category1 as keyof typeof components][Math.floor(Math.random() * components[category1 as keyof typeof components].length)];
  
  // 두 번째 단어 선택 (첫 번째와 다른 카테고리에서 선택하도록 시도)
  let category2 = categories[Math.floor(Math.random() * categories.length)];
  // 카테고리가 2개 이상이면 다른 카테고리에서 선택하도록 시도
  if (categories.length > 1 && category2 === category1) {
    const otherCategories = categories.filter(cat => cat !== category1);
    category2 = otherCategories[Math.floor(Math.random() * otherCategories.length)];
  }
  const word2 = components[category2 as keyof typeof components][Math.floor(Math.random() * components[category2 as keyof typeof components].length)];
  
  // 10~9999 사이의 숫자 생성
  const number = Math.floor(Math.random() * (9999 - 10 + 1)) + 10;
  
  return word1 + word2 + number;
}

/**
 * 학교명으로부터 학교 유형 추론
 */
export function getSchoolTypeFromName(schoolName?: string): 'elementary' | 'middle' | 'high' {
  if (!schoolName) return 'middle';
  
  if (schoolName.includes('초등학교')) {
    return 'elementary';
  } else if (schoolName.includes('고등학교') || schoolName.includes('고교')) {
    return 'high';
  }
  return 'middle';
}
